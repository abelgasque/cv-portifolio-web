name: Notificar deploy da aplicaÃ§Ã£o

on:
  push:
    branches:
      - 'main'
    tags:
      - 'v*'

jobs:
  aws-deploy:
    runs-on: ubuntu-latest
    environment: ${{ github.ref == 'refs/heads/main' && 'development' || 'production' }}

    steps:
    - name: Notify Telegram (Deploy Started)
      run: |
        curl -s -X POST \
          https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
          -d chat_id=${{ secrets.TELEGRAM_CHAT_ID }} \
          -d text="ðŸš€ **Deploy iniciado na AWS!**\nRepositÃ³rio: `${{ github.repository }}`\nAmbiente: ${{ github.ref == 'refs/heads/main' && 'Desenvolvimento' || 'ProduÃ§Ã£o' }}\nTag: `${{ github.ref_name }}`"